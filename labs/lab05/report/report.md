---
## Front matter
title: "Отчёт по лабораторной работе 5"
subtitle: " Простые сети в GNS3. Анализ трафика"
author: "Гафоров Нурмухаммад"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Введение

## Цель работы  

Построение простейших моделей сети на базе коммутатора и маршрутизаторов FRR и VyOS в GNS3, анализ трафика посредством Wireshark.

# Ход выполнения  

## Анализ трафика в GNS3 посредством Wireshark

В среде **GNS3** была создана простейшая сеть, состоящая из двух виртуальных компьютеров (**PC1-ngaforov**, **PC2-ngaforov**) и коммутатора **msk-ngaforov-sw-01**. Устройства были соединены между собой стандартными Ethernet-кабелями.  

![Топология сети в GNS3](Screenshot_1.png){ #fig:001 width=80% }  

После запуска каждого из узлов были открыты консоли **VPCS**. Для проверки доступных команд на терминале **PC1-ngaforov** введена команда ? , которая вывела справку по доступным функциям, включая работу с IP, ARP, ping и сохранением конфигурации.  

![Просмотр справки по командам VPCS](Screenshot_2.png){ #fig:002 width=80% }  

На узле **PC1-ngaforov** был задан IP-адрес **192.168.1.11/24** с указанием шлюза **192.168.1.1** командой ip 192.168.1.11/24 192.168.1.1. После проверки отсутствия дублирующего адреса конфигурация была успешно сохранена с помощью команды save. Аналогичные действия были выполнены для **PC2-ngaforov**, которому присвоен IP-адрес **192.168.1.12/24** и шлюз **192.168.1.1**.  

Далее была выполнена проверка связности между узлами с помощью команды ping. Узлы успешно обменялись ICMP-эхо-запросами и ответами, что подтвердило корректную настройку адресов и функционирование коммутатора.  

![Настройка IP-адресов и проверка связи между узлами](Screenshot_3.png){ #fig:003 width=80% }  

Для анализа сетевого обмена был запущен **Wireshark** на соединении между коммутатором и ПК **PC1**. В момент активации узлов зафиксированы **ARP**-кадры типа **Gratuitous ARP**, указывающие, что устройства объявляют свои IP-адреса в сети (192.168.1.11 и 192.168.1.12).  

![Захват ARP-пакетов в Wireshark](Screenshot_4.png){ #fig:004 width=80% }  

Далее на **PC2-ngaforov** были протестированы различные режимы работы команды ping. После вывода справки (ping /?) последовательно были выполнены эхо-запросы в режимах **ICMP**, **UDP** и **TCP** к адресу **192.168.1.11**.  

![Выполнение ping в различных режимах на PC2](Screenshot_5.png){ #fig:005 width=80% }  

В **Wireshark** отобразились соответствующие типы пакетов. При ICMP-запросе наблюдался стандартный обмен пакетами **Echo Request** и **Echo Reply** между узлами **192.168.1.11** и **192.168.1.12**, что подтверждает корректную реализацию базового ICMP-протокола.  

![ICMP-запрос и ответ между узлами](Screenshot_6.png){ #fig:006 width=80% }  

В режиме **UDP** зафиксированы пакеты, передаваемые с порта **16417** на порт **7**, содержащие эхо-данные. Эти кадры имеют протокол **UDP** и длину 64 байта, что соответствует эхо-запросу без подтверждения на транспортном уровне.  

![Захват UDP-пакетов в Wireshark](Screenshot_7.png){ #fig:007 width=80% }  

При использовании **TCP** наблюдалось установление соединения (последовательность **SYN**, **SYN-ACK**, **ACK**) и передача эхо-данных в рамках установленной сессии. В окне **Wireshark** видно, что TCP-соединение было успешно завершено с обменом сегментов подтверждения (**FIN**, **ACK**).  

![Анализ TCP-пакетов в Wireshark](Screenshot_8.png){ #fig:008 width=80% }  

## Моделирование простейшей сети на базе маршрутизатора FRR в GNS3
 
В среде **GNS3** была смоделирована сеть, состоящая из одного оконечного устройства **PC1-ngaforov**, коммутатора **msk-ngaforov-sw-01** и маршрутизатора **msk-ngaforov-gw-01** на базе **FRRouting**.  

На узле **PC1-ngaforov** с помощью консоли **VPCS** был задан IP-адрес **192.168.1.10/24** и шлюз **192.168.1.1**, после чего конфигурация сохранена. Команда **show ip** отобразила параметры сетевого интерфейса: имя устройства, IP-адрес, маску подсети, шлюз и MAC-адрес.  

![Настройка IP-адреса на ПК](Screenshot_9.png){ #fig:009 width=80% }  

На маршрутизаторе **msk-ngaforov-gw-01** под управлением **FRR** выполнена базовая настройка. В конфигурационном режиме был задан IP-адрес **192.168.1.1/24** на интерфейсе **eth0**, интерфейс активирован, а конфигурация сохранена в файл `/etc/frr/frr.conf`.  

![Настройка интерфейса маршрутизатора FRR](Screenshot_10.png){ #fig:010 width=80% }  

Проверка текущей конфигурации с помощью команды **show running-config** показала, что интерфейсу **eth0** успешно присвоен адрес **192.168.1.1/24**.  

![Просмотр текущей конфигурации маршрутизатора](Screenshot_11.png){ #fig:011 width=80% }  

Команда **show interface brief** подтвердила, что интерфейс **eth0** находится в состоянии **up** и имеет правильные параметры адресации.  

![Интерфейс маршрутизатора активен](Screenshot_12.png){ #fig:012 width=80% }  

После настройки маршрутизатора была проведена проверка связи между ПК и шлюзом с помощью ICMP-запроса. Команда **ping 192.168.1.1** показала успешный обмен эхо-пакетами без потерь, что подтвердило корректную работу сетевой конфигурации.  

![Проверка связи между ПК и маршрутизатором](Screenshot_13.png){ #fig:013 width=80% }  

В процессе анализа трафика в **Wireshark** были зафиксированы **ARP**-запросы, а также **ICMP Echo Request** и **Echo Reply** между узлами **192.168.1.10** и **192.168.1.1**, что демонстрирует успешную двустороннюю передачу данных.  

![Анализ ICMP-трафика в Wireshark](Screenshot_14.png){ #fig:014 width=80% }  

##  Моделирование простейшей сети на базе маршрутизатора VyOS в GNS3

Далее была смоделирована аналогичная топология с использованием маршрутизатора **VyOS**.  

После загрузки устройства **VyOS** в режиме конфигурирования был изменён хостнейм на **msk-ngaforov-gw-01**, а интерфейсу **eth0** присвоен IP-адрес **192.168.1.1/24**. Параметр DHCP был удалён, изменения сохранены и применены.  

![Настройка маршрутизатора VyOS](Screenshot_15.png){ #fig:015 width=80% }  

Просмотр конфигурации интерфейсов подтвердил корректность настроек: интерфейс **eth0** активен, имеет IP-адрес **192.168.1.1/24** и аппаратный адрес **0c:99:d0:40:00:00**.  

![Проверка настроек интерфейсов VyOS](Screenshot_16.png){ #fig:016 width=80% }  

На узле **PC1-ngaforov** был успешно выполнен ICMP-тест с маршрутизатором VyOS. Все пакеты дошли без потерь, что свидетельствует о правильной настройке сетевых параметров.  

![Проверка связи с маршрутизатором VyOS](Screenshot_17.png){ #fig:017 width=80% }  

Анализ трафика в **Wireshark** показал обмен ICMP-пакетами между узлами **192.168.1.10** и **192.168.1.1**, а также ARP-запросы, что подтверждает корректное функционирование сетевого взаимодействия.  

![Захват ICMP и ARP трафика в Wireshark](Screenshot_18.png){ #fig:018 width=80% }  

# Вывод  

В ходе лабораторной работы была смоделирована и исследована работа простейших сетей на базе коммутатора и маршрутизаторов **FRR** и **VyOS** в среде **GNS3**. С помощью анализатора трафика **Wireshark** были зафиксированы пакеты протоколов **ARP**, **ICMP**, **UDP** и **TCP**, что позволило изучить принципы их функционирования.  

При анализе TCP-трафика подтверждена корректная реализация механизма установления соединения по схеме **Three-Way Handshake**, включающей этапы **SYN**, **SYN/ACK** и **ACK**. Это обеспечивает надёжное установление соединения перед передачей данных и синхронизацию номеров последовательностей между узлами.  

Полученные результаты демонстрируют корректную работу сетевых протоколов на канальном, сетевом и транспортном уровнях модели **OSI**, а также подтверждают понимание принципов взаимодействия узлов в локальной сети и процессов обмена данными при передаче запросов и ответов.  
