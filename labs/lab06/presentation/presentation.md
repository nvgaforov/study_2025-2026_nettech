---
lang: ru-RU
title: Адресация IPv4 и IPv6. Dual Stack
subtitle: Лабораторная работа №6
author:
  - Гафоров Нурмухаммад
institute:
  - Российский университет дружбы народов, Москва, Россия
date: 11 ноября 2025

toc: false
slide_level: 2
aspectratio: 169
theme: metropolis
section-titles: true
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
---

# Цели и задачи

## Цель работы

Изучить настройку IPv4 и IPv6, разбиение сетей на подсети, работу двойного стека (Dual Stack) и анализ сетевого трафика.

# Разбиение IPv4 на подсети

## Исходная сеть: 172.16.20.0/24

Требуется подсети: 126, 62, 62 хостов.

| Подсеть | Префикс | Диапазон адресов | Broadcast |
|--------|---------|------------------|-----------|
| 1 | /25 | 172.16.20.1 – 172.16.20.126 | 172.16.20.127 |
| 2 | /26 | 172.16.20.129 – 172.16.20.190 | 172.16.20.191 |
| 3 | /26 | 172.16.20.193 – 172.16.20.254 | 172.16.20.255 |

# Разбиение IPv6 на подсети

## Исходная сеть: 2001:db8:c0de::/48

1. Разбиение по идентификатору подсети (SubNetID):

- 2001:db8:c0de:0000::/49
- 2001:db8:c0de:8000::/49

2. Разбиение по идентификатору интерфейса (InterfaceID):

- 2001:db8:c0de:0000::/65
- 2001:db8:c0de:0000:8000::/65

# Настройка двойного стека адресации IPv4 и IPv6 в локальной сети

## Настройка устройства PC3 (IPv6)

![PC3 конфигурация](Screenshot_10.png){width=65%}

## Настройка устройства PC4 (IPv6)

![PC4 конфигурация](Screenshot_11.png){width=65%}

## Настройка сервера Dual Stack

![Сервер IPv6/IPv4](Screenshot_12.png){width=65%}

## Настройка маршрутизатора VyOS

Интерфейсы получили минимальные адреса подсети:

| Интерфейс | IPv6 адрес |
|----------|------------|
| eth0 | 2001:db8:c0de:12::1/64 |
| eth1 | 2001:db8:c0de:13::1/64 |
| eth2 | 2001:db8:c0de:11::1/64 |

## Настройка маршрутизатора VyOS

![Настройка интерфейсов](Screenshot_13.png){width=70%}

## Проверка IPv6

Узлы успешно отправляют ICMPv6 Echo Request / Reply:

![ping IPv6](Screenshot_15.png){width=75%}

# Анализ трафика (Wireshark)

## ARP (IPv4)

Позволяет определить MAC-адрес по IPv4-адресу.

![ARP](Screenshot_18.png){width=80%}

## ICMP (IPv4)

Показывает успешность доставки пакетов между узлами.

![ICMPv4](Screenshot_19.png){width=80%}

## ICMPv6 (IPv6)

Аналог ICMP, используется также для Neighbor Discovery.

![ICMPv6](Screenshot_20.png){width=80%}

# Самостоятельная часть

## Топология сети

![Топология](Screenshot_21.png){width=70%}

# Проверка связи

Передача пакетов между подсетями (IPv6 и IPv4):

![Проверка](Screenshot_26.png){width=60%}

# Выводы

В ходе работы выполнено:

- Разбиение IPv4 и IPv6 на подсети.
- Настройка адресов на ПК и маршрутизаторе.
- Проверка связи между узлами.
- Анализ ARP, ICMP и ICMPv6 в Wireshark.

Получены практические навыки настройки Dual Stack и анализа сетевого трафика.
